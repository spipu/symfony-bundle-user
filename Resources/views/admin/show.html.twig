{% extends 'base.html.twig' %}
{% import '@SpipuUi/macro/buttons.html.twig' as buttons %}

{% set menuCurrentItem="spipu-user-admin" %}

{% block header_title %}{{ parent() }} - {{ 'spipu.user.page.admin.list'|trans() }} - {{ block('main_title') }}{% endblock %}

{% block main_title %}{{ 'spipu.user.page.admin.show'|trans({'%id': manager.resource.id}) }}{% endblock %}

{% block main_actions %}
    {{ buttons.back(path('spipu_user_admin_list')) }}
    {% if is_granted('ROLE_ADMIN_MANAGE_USER_EDIT') %}
        {{ buttons.edit(path('spipu_user_admin_edit', {'id': manager.resource.id})) }}
    {% endif %}
    {% if manager.resource.id != app.user.id %}
        {% if is_granted('ROLE_ADMIN_MANAGE_USER_EDIT') %}
            {{ buttons.defaultLink(path('spipu_user_admin_reset', {'id': manager.resource.id}), 'spipu.user.action.reset', 'primary confirm-action', 'key', null, 'reset the password of') }}
            {% if manager.resource.active %}
                {{ buttons.defaultLink(path('spipu_user_admin_disable', {'id': manager.resource.id, 'backTo': 'show'}), 'spipu.user.action.disable', 'warning', 'times') }}
            {% else %}
                {{ buttons.defaultLink(path('spipu_user_admin_enable', {'id': manager.resource.id, 'backTo': 'show'}), 'spipu.user.action.enable', 'info', 'check') }}
            {% endif %}
        {% endif %}
        {% if is_granted('ROLE_ADMIN_MANAGE_USER_DELETE') %}
            {{ buttons.delete(path('spipu_user_admin_delete', {'id': manager.resource.id}), 'user_' ~ manager.resource.id) }}
        {% endif %}
    {% endif %}
{% endblock %}

{% block body %}{{ renderManager(manager) }}{% endblock %}
